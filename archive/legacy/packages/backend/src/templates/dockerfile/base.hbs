# Base ROS
{{distro}}
layer FROM
{{baseImage}}
ENV DEBIAN_FRONTEND=noninteractive ENV ROS_DISTRO={{distro}}
WORKDIR
{{workdir}}

# Install core system dependencies RUN apt-get update && apt-get install -y \
{{#each apt}}
  {{this}}
  \
{{/each}}
&& rm -rf /var/lib/apt/lists/* # Install Python dependencies if any
{{#if pip.length}}
  RUN python3 -m pip install --upgrade pip && pip3 install \
  {{#each pip}}
    {{this}}
    \
  {{/each}}
{{/if}}

# Source ROS setup RUN echo "source /opt/ros/{{distro}}/setup.bash" >> ~/.bashrc
